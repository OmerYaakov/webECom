<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="/api/facebook"></script>
<script>

    $(document).ready(function () {
        console.log('ready!')

        $("#create-product").click(function (event) {
            // event.preventDefault(); // Prevent the default form submission
            // console.log("Form submitted");
            // const url = `/images`;
            // const formData = new FormData();


            // // Append the image file and description to the FormData object
            // formData.append('avatar', $("#input-image")[0].files[0]);
            // formData.append('description', $("#desc-input").val()); // Ensure the correct ID here

            // console.log(formData);

            // // Make the AJAX POST request with FormData
            // $.ajax({
            //     url: url,
            //     type: "POST",
            //     data: formData,
            //     processData: false, // Prevent jQuery from processing the data
            //     contentType: false, // Let the browser set the content type
            //     success: function (res) {
            //         console.log("upload success:", res);
            //     },
            //     error: function (err) {
            //         console.error("upload error:", err);
            //     }
            // });


            console.log("category:", $("#exampleFormControlSelect1").val());
            $.ajax({
                url: '/api/products',
                type: 'POST',
                data:
                    JSON.stringify({
                        // productName: $("#name").val(),
                        modelNumber: $("#model_number").val(),
                        details: $("#details").val(),
                        goldWeight: $("#gold_weight").val(),
                        goldType: $("#gold_type").val(),
                        diamondNumber: $("#diamond_number").val(),
                        diamondWeight: $("#diamond_weight").val(),
                        categoryName: $("#category").val(),
                        price: $("#price").val(),
                        image: "sdasdasdsa"
                    }),
                contentType: 'application/json',
                success: function (res) {
                    console.log("upload success:", res);
                },
                error: function (err) {
                    console.error("upload error:", err);
                }
            });
        });
        $("#post-to-facebook").click(function () {
            console.log("post to facebook");
            postToFacebook(); // Call the function when the button is clicked
        });
    });
</script>
<div class="card mb-3">
    <div class="card-body">
        <h3 class="mb-3">יצירת מוצר</h3>
        <section class="position-relative py-4 py-xl-5">
            <div class="container position-relative">
                <div class="row d-flex justify-content-center">
                    <div class="col">
                        <div class="mb-3">

                            <input id="name" class="form-control text-right" type="text" name="name"
                                   placeholder="שם מוצר"/>
                            <input id="details" class="form-control text-right" type="text" name="details"
                                   placeholder="תיאור מוצר"/>
                            <input id="model_number" class="form-control text-right" type="text" name="model_number"
                                   placeholder="מספר דגם"/>
                            <input id="gold_weight" class="form-control text-right" type="text" name="gold_weight"
                                   placeholder="משקל זהב"/>
                            <input id="gold_type" class="form-control text-right" type="text" name="gold_type"
                                   placeholder="סוג זהב"/>
                            <input id="diamond_number" class="form-control text-right" type="text" name="diamond_number"
                                   placeholder="כמות יהלומים"/>
                            <input id="diamond_weight" class="form-control text-right" type="text" name="diamond_weight"
                                   placeholder="משקל יהלומים"/>
                            <div class="form-group">
                                <select class="form-control text-right" id="category">
                                    <option id="bracelet">צמיד</option>
                                    <option id="watch">שעון</option>
                                    <option id="ring">טבעת</option>
                                    <option id="earring">עגיל</option>
                                    <option id="necklace">שרשרת</option>
                                </select>
                            </div>
                            <input id="price" class="form-control text-right" type="text" name="price"
                                   placeholder=" מחיר"/>
                        </div>
                        <input type="file" id="input-image" name="avatar"/>
                        <div class="delivery-options">
                            <label>:לפרסם בפייסבוק</label>
                            <div class="radio-container">
                                <input class="radio" type="radio" name="facebook" id="post">
                                <label for="post">כן</label>
                            </div>
                            <div class="radio-container">
                                <input class="radio" type="radio" name="facebook" id="npost">
                                <label for="npost">לא</label>

                            </div>
                        </div>
                        <hr/>
                        <div>
                            <button id="create-product" class="btn btn-dark d-block w-100" type="submit">Send</button>
                            <div>
                                <button class="btn btn-dark d-block w-100" type="button" onclick="postToFacebook()">face</button>
                                </button>
                            </div>
                        </div>
                    </div>
                    </form>
                </div>
            </div>
    </section>
</div>
</div>